#:import tr wacomponents.i18n.tr


<PassphrasesDialogContent>:
    orientation: "vertical"
    spacing: "20"
    size_hint_y: None
    height: "220"
    #id: passphrases_layout

    #MDTextField:
    #    hint_text: "Passphrase"


<CryptainerStoreScreen>:

    on_pre_enter:
        # Lazy-init hack to workaround Clock iteration troubles
        cryptainer_delete_btn.size_hint_x = 0.5
        cryptainer_decrypt_btn.size_hint_x = 0.5
        root.get_detected_cryptainer()  # FIXME rename this!!!

    on_pre_leave:
        root.cancel_cryptainer_loading()


    viewclass: 'Label'
    RecycleBoxLayout:
        default_size: None, dp(56)
        default_size_hint: 1, None
        size_hint_y: None
        height: self.minimum_height
        orientation: 'vertical'

    WAMainVerticalScrollView:

        WAVerticalPanel:

            WAToolbar:
                title: tr._("Containers")
                left_action_items: [['menu', lambda x: app.navigation_drawer.set_state("toggle")]]
                right_action_items: [["refresh", lambda x: root.get_detected_cryptainer(), tr._("Refresh")], ["home", lambda x: app.get_back_to_home_screen(), tr._("Back to home")],]

            WAElevatedBoxLayout:

                MDLabel:
                    text: tr._("View and manage encrypted containers")
                    padding_x: "10dp"

            WAVerticalScrollView:
                MDList:
                    id: cryptainer_table
            WAButtonsGridLayout:
                padding: [10, 10]

                WAOperationButton:
                    id: cryptainer_delete_btn
                    icon: "delete-alert-outline"
                    text: tr._("Delete")
                    on_press: root.open_cryptainer_deletion_dialog()

                WAOperationButton:
                    id: cryptainer_decrypt_btn
                    icon: "eye-circle-outline"
                    text: tr._("Decryption process")
                    # on_press: root.open_cryptainer_decryption_dialog()
                    on_press: root._launch_cryptainer_decryption()

