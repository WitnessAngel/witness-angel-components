#:import tr waguilib.i18n.tr


<LeftCheckbox@ILeftBodyTouch+MDCheckbox>:


<AuthenticatorEntry@OneLineAvatarIconListItem>:
    text: "One-line item with avatar"

    LeftCheckbox:
        id: selection_checkbox

    #IconRightWidget:
    #    icon: "minus"


<AuthenticationDeviceStoreScreen>:

    on_pre_enter:
        root.list_imported_key_devices()
        keyguardian_import_btn.size_hint_x = 0.5
        keyguardian_delete_btn.size_hint_x = 0.5

    #canvas.before:
    #    Color:
    #        rgba: 0.1372, 0.2862, 0.5294, 1
    #    Rectangle:
    #        pos: self.pos
    #        size: self.size

    WAMainVerticalScrollView:

        MDGridLayout:
            cols: 1

            MDToolbar:
                title: "Witness Angel"
                elevation: 10
                left_action_items: [['menu', lambda x: app.navigation_drawer.set_state("toggle")]]
                right_action_items: [["refresh", lambda x: root.list_imported_key_devices(), tr._("Refresh")], ["home", lambda x: app.get_back_to_home_screen(), tr._("Back to home")],]

            WAElevatedMDBoxLayout:

                MDLabel:
                    text: tr._("Please select authenticators to use for encryption")
                    halign: "left"
                    padding_x: "10dp"

            #MDLabel:
            #    text: 'Key management'
            #    halign: "left"
            #    padding_x: "10dp"
            #    font_size: "10dp"

            WAVerticalScrollView:

                MDList:
                    id: imported_authenticator_list

            #WAVerticalScrollView:

            #    GridLayout:
            #        size_hint_y: None
            #        id: device_table
            #        cols: 2
            #        row_default_height: 25
            #        row_force_default: True
            #        padding: 10
            #        spacing: (0, 10)
            #        height: self.minimum_height


            MDGridLayout:
                id: authenticator_actions_modify
                cols: 2
                size_hint_x: 1
                size_hint_y: None
                height: self.minimum_height
                spacing: 10
                padding: [10, 10]

                MDRectangleFlatIconButton:
                    id: keyguardian_import_btn
                    icon: "database-export-outline"
                    #background_color: (51, 23, 186.0, 1)
                    #color: 0.1372, 0.2862, 0.5294, 1
                    text: "Import new keys"
                    #size_hint_x: 0.5
                    #size_hint_y: None
                    on_press:
                        root.import_keys()

                MDRectangleFlatIconButton:
                    id: keyguardian_delete_btn
                    icon: "database-export-outline"
                    #background_color: (51, 23, 186.0, 1)
                    #color: 0.1372, 0.2862, 0.5294, 1
                    text: "Delete keys"
                    #size_hint_x: 0.5
                    #size_hint_y: None
                    on_press:
                        root.delete_keys()
