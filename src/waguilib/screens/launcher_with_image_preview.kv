


<LauncherWithImagePreviewScreen>:

    orientation: "vertical"
#    canvas.before:
#        Color:
#            rgba: 0.1372, 0.2862, 0.5294, 1
#        Rectangle:
#            pos: self.pos
#            size: self.size

    BoxLayout:
        orientation: 'vertical'
        spacing: 20

        WAToolbar:
            #md_bg_color: (0.1372, 0.2862, 0.5294, 1)
            title: "Witness Angel Ward - NVR"
            left_action_items: [['menu', lambda x: app.navigation_drawer.set_state("toggle")]]
            right_action_items: [['cog', lambda x: app.open_settings()]]

        ToggleButton:
            id: recording_button
            text: 'Start Witness Angel' if self.state == 'normal' else 'Stop Witness Angel'
            pos_hint: {'center_x': 0.5}
            size_hint: (0.7, 0.2)
            on_state: app.switch_to_recording_state(is_recording=(self.state == "down"))
            font_size: "30sp"

        Image:
            id: preview_image
            source: str(app.fallback_preview_image_path)
            size: (10, 10)     #self.texture_size if self.texture else (10, 10)
            allow_stretch: True
            keep_ratio: True
            nocache: True


